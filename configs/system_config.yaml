# 系统配置文件
# 相机参数（需要根据实际标定结果修改）
camera:
  # 左相机内参矩阵 [3x3]
  left_camera_matrix: [[800, 0, 320], [0, 800, 240], [0, 0, 1]]
  # 右相机内参矩阵 [3x3]
  right_camera_matrix: [[800, 0, 320], [0, 800, 240], [0, 0, 1]]
  # 左相机畸变系数 [k1, k2, p1, p2, k3]
  left_dist_coeffs: [0.0, 0.0, 0.0, 0.0, 0.0]
  # 右相机畸变系数
  right_dist_coeffs: [0.0, 0.0, 0.0, 0.0, 0.0]
  # 立体校正参数
  stereo:
    # 旋转矩阵 R [3x3]
    R: [[1, 0, 0], [0, 1, 0], [0, 0, 1]]
    # 平移向量 T [3x1]
    T: [0.12, 0, 0]  # 基线距离12cm
    # 左相机校正矩阵
    R1: [[1, 0, 0], [0, 1, 0], [0, 0, 1]]
    # 右相机校正矩阵
    R2: [[1, 0, 0], [0, 1, 0], [0, 0, 1]]
    # 投影矩阵
    P1: [[800, 0, 320, 0], [0, 800, 240, 0], [0, 0, 1, 0]]
    P2: [[800, 0, 320, -96], [0, 800, 240, 0], [0, 0, 1, 0]]
    # Q矩阵（用于重投影）
    Q: [[1, 0, 0, -320], [0, 1, 0, -240], [0, 0, 0, 800], [0, 0, -8.333333333333334, 0]]
  # 图像分辨率
  image_width: 640
  image_height: 480
  # 焦距（像素）
  focal_length: 800
  # 基线距离（米）
  baseline: 0.12

# 模型路径配置
models:
  # YOLO模型路径（支持.pt, .onnx, .hef格式）
  yolo_model: "models/yolo_obstacle.hef"
  # U-Net模型路径
  unet_model: "models/unet_obstacle.hef"
  # 输入图像尺寸
  input_size: [640, 480]
  # 置信度阈值
  detection_confidence: 0.5
  # NMS阈值
  nms_threshold: 0.4

# 立体匹配参数
stereo_matching:
  # SGBM参数
  min_disparity: 0
  num_disparities: 64
  block_size: 11
  P1: 8 * 3 * 11 * 11
  P2: 32 * 3 * 11 * 11
  disp12MaxDiff: 1
  preFilterCap: 63
  uniquenessRatio: 15
  speckleWindowSize: 0
  speckleRange: 0
  mode: "SGBM"

# 碰撞风险评估参数
risk_assessment:
  # 安全距离阈值（米）
  safe_distance: 3.0
  # 警告距离阈值（米）
  warning_distance: 2.0
  # 危险距离阈值（米）
  danger_distance: 1.0
  # 碰撞风险阈值（0-1）
  risk_threshold: 0.7
  # 刹车触发距离（米）
  brake_distance: 0.8

# 显示界面参数
display:
  # 窗口尺寸
  window_width: 1280
  window_height: 720
  # 鸟瞰图范围（米）
  bev_range: 10.0
  # 自车位置（像素）
  ego_position: [640, 360]
  # 更新频率（FPS）
  target_fps: 15

# Hailo-8配置
hailo:
  # 是否使用Hailo加速
  enabled: true
  # 设备索引
  device_index: 0
  # 批处理大小
  batch_size: 1

# 系统性能参数
performance:
  # 目标帧率
  target_fps: 15
  # 最大延迟（毫秒）
  max_latency_ms: 150
  # 是否启用多线程
  multi_threading: true
  # 线程数
  num_threads: 4

